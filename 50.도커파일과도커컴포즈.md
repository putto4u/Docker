도커를 실무에서 다룰 때 가장 많이 접하게 되는 두 파일, **Dockerfile**과 **Docker Compose**의 차이와 협업 구조를 명확히 정리해 드립니다.

쉽게 요약하자면, **Dockerfile은 '하나의 부품(이미지)을 만드는 레시피'**이고, **Docker Compose는 '여러 부품을 조립해 전체 시스템을 가동하는 조립 설명서'**입니다.

---

## 1. Dockerfile: 이미지 빌드 설계도

이미지를 한 땀 한 땀 만드는 과정입니다. OS 설정부터 소스 코드 복사, 환경 변수 세팅까지 **'단일 컨테이너'**의 내부 환경을 정의합니다.

* **역할:** `docker build` 명령어를 통해 이미지를 생성함.
* **주요 명령어:** `FROM`, `RUN`, `COPY`, `WORKDIR`, `CMD` 등.
* **파일 예시:**
```dockerfile
FROM python:3.9           # 베이스 이미지 선택
WORKDIR /app              # 작업 디렉토리 설정
COPY . .                  # 내 코드를 컨테이너로 복사
RUN pip install -r reqs.txt # 패키지 설치
CMD ["python", "app.py"]  # 실행 명령

```



---

## 2. Docker Compose: 다중 컨테이너 오케스트레이션

현대적인 웹 서비스는 보통 **웹 서버 + DB + 캐시(Redis)** 등 여러 컨테이너가 함께 돌아가야 합니다. 이를 일일이 `docker run`으로 띄우면 명령어 관리와 네트워크 연결이 매우 복잡해집니다. 이 과정을 **`docker-compose.yml`** 파일 하나로 자동화합니다.

* **역할:** 여러 컨테이너의 설정(포트, 볼륨, 네트워크)을 통합 관리하고 `docker-compose up` 명령 한 줄로 전체 시스템을 기동함.
* **주요 섹션:** `services`, `networks`, `volumes`.
* **파일 예시:**
```yaml
services:
  web:
    build: .              # 현재 디렉토리의 Dockerfile로 이미지 빌드
    ports:
      - "5000:5000"
  db:
    image: postgres:15    # 이미 만들어진 공식 이미지 사용
    environment:
      POSTGRES_PASSWORD: example

```



---

## 3. 한눈에 비교하기

| 구분 | Dockerfile | Docker Compose |
| --- | --- | --- |
| **목적** | **이미지 생성** (나만의 SW 패키징) | **컨테이너 실행/관리** (서비스 실행) |
| **대상** | 단일 컨테이너 내부 설정 | 다중 컨테이너 간의 관계/설정 |
| **명령어** | `docker build -t ...` | `docker-compose up` |
| **포커스** | 어떻게 설치하고 구성할 것인가? | 어떻게 서로 연결하고 띄울 것인가? |

---

## 4. 둘이 어떻게 같이 동작하나요? (Workflow)

실제 개발 현장에서는 이 두 파일을 함께 사용합니다.

1. **Dockerfile 작성:** 내가 만든 앱이 돌아갈 환경을 정의합니다.
2. **docker-compose.yml 작성:** 위에서 정의한 앱과 외부 DB(MySQL 등)를 어떻게 연결할지 적습니다.
3. **실행:** `docker-compose up --build` 명령을 입력합니다.
* 도커는 먼저 **Dockerfile**을 보고 이미지를 **빌드**합니다.
* 그 후 **Compose** 설정에 맞춰 DB 이미지를 내려받고, 두 컨테이너를 하나의 네트워크로 묶어 **동시에 실행**합니다.



---

### 💡 실전 팁

* **단독 실행:** 단순한 테스트용 이미지를 만들 때는 **Dockerfile**만 있으면 됩니다.
* **협업:** 팀원에게 "이 프로젝트 실행해봐"라고 할 때는 Dockerfile과 docker-compose.yml을 같이 줍니다. 팀원은 `docker-compose up` 한 줄이면 모든 환경이 똑같이 세팅됩니다.
* **네트워크:** Compose를 쓰면 컨테이너끼리 서로의 **서비스 이름(예: `db`)**으로 통신할 수 있어 IP 주소를 몰라도 됩니다.

